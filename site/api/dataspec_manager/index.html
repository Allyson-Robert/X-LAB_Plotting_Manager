<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>DataSet Manager API Documentation - X-LAB Plotting Manager</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "DataSet Manager API Documentation";
        var mkdocs_page_input_path = "api\\dataspec_manager.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> X-LAB Plotting Manager
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../datasets/">DataSets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../logging/">Logging & debugging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gui/windows_and_dialogs/">GUI - Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gui/plot_manager/">GUI - Plot Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gui/utils/">GUI - Utils</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Contracts - Data</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../contracts/data/data_types/">Data Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../contracts/data/data_processors/">Data Processors</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Contracts - Plotters</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../contracts/plotters/plotter/">Plotter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../contracts/plotters/plotter_options/">PlotterOptions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contracts/devices/">Contracts - Devices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contracts/file_readers/">Contracts - File Readers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contracts/observable/">Contracts - Observable</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/class_utils/">Utils - Class Utils</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/errors/">Utils - Errors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/logging/">Utils - Logging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/others/">Utils - Others</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../dataset_manager.md">DataSet</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">X-LAB Plotting Manager</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">DataSet Manager API Documentation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Allyson-Robert/X-LAB_Plotting_Manager/edit/master/docs/api/dataspec_manager.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="dataset-manager-api-documentation">DataSet Manager API Documentation</h1>


<div class="doc doc-object doc-class">



<a id="dataset_manager.dataset.DataSet"></a>
    <div class="doc doc-contents first">



        <p>Container for experiment metadata and associated data file locations.</p>
<p>A <code>DataSet</code> instance describes a single experiment or dataset in terms of:
- Basic metadata: name, creation date, experiment date/time, device identifier.
- User annotations: free-form notes and a simple time-stamped console log.
- File layout: a mapping from human-readable labels to absolute file paths.
- Optional colour mapping: label-to-colour mapping for consistent plotting.
- Structure type: how files are organised on disk (e.g. flat vs. directory-labelled).</p>
<p>The class does <em>not</em> interpret the contents of the files; it only tracks their
locations and minimal metadata. Filepaths can be:
- Added manually via <code>add_filepath</code>, or
- Auto-populated from a root directory using <code>construct_filepaths(...)</code>.</p>
<h3 id="dataset_manager.dataset.DataSet--structure-types">Structure types</h3>
<ul>
<li><code>"flat"</code>:
    A simple one-level mapping from label -&gt; file path. This is the default
    and most common mode; <code>construct_filepaths_nrecursive</code> will scan a single
    directory and register all supported files using their stem as label.</li>
<li><code>"dirlabelled"</code>:
    A directory-labelled mode where each top-level directory becomes a label
    and contains its own mapping of files. This is handled by
    <code>construct_structured_filepaths</code> and is considered deprecated in favour
    of the generic <code>construct_filepaths</code>.</li>
<li><code>"structured"</code>:
    Reserved for legacy/experimental layouts; treated as an allowed but
    user-managed structure type.</li>
</ul>
<h3 id="dataset_manager.dataset.DataSet--validation">Validation</h3>
<p>All paths added to the dataset are checked for:
- Existence on disk.
- Being a file (not a directory).
- Having an extension in the accepted set (<code>xlsx</code>, <code>xls</code>, <code>csv</code>,
  <code>txt</code>, <code>dpt</code>, <code>json</code>).</p>
<p>Two <code>DataSet</code> instances are considered equal if all their attributes
(including filepaths, colours, and metadata) match exactly.</p>







              <details class="quote">
                <summary>Source code in <code>dataset_manager\dataset.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@decorate_class_with_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DataSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Container for experiment metadata and associated data file locations.</span>

<span class="sd">        A `DataSet` instance describes a single experiment or dataset in terms of:</span>
<span class="sd">        - Basic metadata: name, creation date, experiment date/time, device identifier.</span>
<span class="sd">        - User annotations: free-form notes and a simple time-stamped console log.</span>
<span class="sd">        - File layout: a mapping from human-readable labels to absolute file paths.</span>
<span class="sd">        - Optional colour mapping: label-to-colour mapping for consistent plotting.</span>
<span class="sd">        - Structure type: how files are organised on disk (e.g. flat vs. directory-labelled).</span>

<span class="sd">        The class does *not* interpret the contents of the files; it only tracks their</span>
<span class="sd">        locations and minimal metadata. Filepaths can be:</span>
<span class="sd">        - Added manually via `add_filepath`, or</span>
<span class="sd">        - Auto-populated from a root directory using `construct_filepaths(...)`.</span>

<span class="sd">        Structure types</span>
<span class="sd">        ----------------</span>
<span class="sd">        - ``&quot;flat&quot;``:</span>
<span class="sd">            A simple one-level mapping from label -&gt; file path. This is the default</span>
<span class="sd">            and most common mode; `construct_filepaths_nrecursive` will scan a single</span>
<span class="sd">            directory and register all supported files using their stem as label.</span>
<span class="sd">        - ``&quot;dirlabelled&quot;``:</span>
<span class="sd">            A directory-labelled mode where each top-level directory becomes a label</span>
<span class="sd">            and contains its own mapping of files. This is handled by</span>
<span class="sd">            `construct_structured_filepaths` and is considered deprecated in favour</span>
<span class="sd">            of the generic `construct_filepaths`.</span>
<span class="sd">        - ``&quot;structured&quot;``:</span>
<span class="sd">            Reserved for legacy/experimental layouts; treated as an allowed but</span>
<span class="sd">            user-managed structure type.</span>

<span class="sd">        Validation</span>
<span class="sd">        ----------</span>
<span class="sd">        All paths added to the dataset are checked for:</span>
<span class="sd">        - Existence on disk.</span>
<span class="sd">        - Being a file (not a directory).</span>
<span class="sd">        - Having an extension in the accepted set (``xlsx``, ``xls``, ``csv``,</span>
<span class="sd">          ``txt``, ``dpt``, ``json``).</span>

<span class="sd">        Two `DataSet` instances are considered equal if all their attributes</span>
<span class="sd">        (including filepaths, colours, and metadata) match exactly.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: properly deprecate structured, assume flat for now</span>
    <span class="n">_allowed_structure_types</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;flat&quot;</span><span class="p">,</span> <span class="s2">&quot;dirlabelled&quot;</span><span class="p">,</span> <span class="s2">&quot;structured&quot;</span><span class="p">)</span>
    <span class="n">_accepted_extensions</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;xlsx&quot;</span><span class="p">,</span> <span class="s2">&quot;xls&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span> <span class="s2">&quot;dpt&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">creation_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">creation_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;creation_date must be a string in format YYYY.MM.DD_HH.MM.SS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creation_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">creation_date</span><span class="p">,</span> <span class="s2">&quot;%Y.%m.</span><span class="si">%d</span><span class="s2">_%H.%M.%S&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experiment_date_time</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># FEATURE REQUEST: Allow multiple device types to be compatible with the same set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">console</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structure_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colours</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Setters</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name must be a string&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_experiment_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_date_time</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">experiment_date_time</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;experiment_date_time must be a string in format YYYY.MM.DD_HH.MM.SS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experiment_date_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">experiment_date_time</span><span class="p">,</span> <span class="s2">&quot;%Y.%m.</span><span class="si">%d</span><span class="s2">_%H.%M.%S&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;device must be a string&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">device</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_structure_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desired_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowed_structure_types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structure_type</span> <span class="o">=</span> <span class="n">desired_type</span>
        <span class="c1"># Warn users when trying to overwrite the structure type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">notes_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;notes_content must be a string&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span> <span class="o">=</span> <span class="n">notes_content</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_console</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">console_content</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">console_content</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;console_content must be a dict&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">console</span> <span class="o">=</span> <span class="n">console_content</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepaths</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filepaths must be a dict&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span> <span class="o">=</span> <span class="n">filepaths</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_colours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colours</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colours</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;colours must be a dict&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colours</span> <span class="o">=</span> <span class="n">colours</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;location must be a string/path&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">construct_filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;New function construct_filepaths_nrecursive not implemented recursively&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Should depend on experiment type (making structure redundant)?</span>
        <span class="c1"># TODO: Something about the experiment type compatibility here.</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowed_structure_types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_structure_type</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Incompatible structure type (</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">). Choose from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_structure_types</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">match</span> <span class="nb">type</span><span class="p">:</span>
            <span class="k">case</span> <span class="s2">&quot;flat&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_filepaths_nrecursive</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span>
            <span class="k">case</span> <span class="s2">&quot;dirlabelled&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_structured_filepaths</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">construct_filepaths_nrecursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Will generate a flat file set and add it to the current filepaths. This will seek all files and</span>
<span class="sd">            of the giver root_dir and append all dataset files to the filepaths attribute. Note that</span>
<span class="sd">            root_dir should be an absolute path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Checks which files are contained in the root dir</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="c1"># Ignores duplicates</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">errors</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ignored </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: duplicate label </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">continue</span>

            <span class="c1"># Only add valid files</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">is_path_valid</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_path_valid</span><span class="p">:</span>
                <span class="c1"># Use filename as path label</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_filepath</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span> <span class="o">+=</span> <span class="n">error_msg</span>

        <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">construct_filepaths_recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">construct_structured_filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Will generate a dirlabelled file set and add it to the current filepaths. This will seek all files and</span>
<span class="sd">            subdirectories of the giver root_dir and append all dataset files to the filepaths attribute. Note that</span>
<span class="sd">            root_dir should be an absolute path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Function construct_structured_filepaths is deprecated use construct_filepaths instead&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_structure_type</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;flat&quot;</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">errors</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ignored </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: duplicate label </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="k">continue</span>

                <span class="c1"># Create nested dict for subdirectories</span>
                <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)):</span>
                        <span class="c1"># Only append to dataset if file is actually a file with an accepted extension</span>
                        <span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">is_path_valid</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_path_valid</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">file</span><span class="p">]</span> <span class="o">=</span> <span class="n">filepath</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">errors</span> <span class="o">+=</span> <span class="n">error_msg</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;Flat dataset_manager cannot use dirlabelled construction&quot;</span>

        <span class="k">return</span> <span class="n">errors</span>

    <span class="c1"># Getters</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_filepath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_experiment_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">experiment_date_time</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_single_colour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colours</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colours</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_colours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colours</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colours</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_console</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">console</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">notes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_structure_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure_type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_creation_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">creation_date</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Adding / Appending</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">additional_notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">additional_notes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;additional_notes must be a string&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span> <span class="o">+=</span> <span class="n">additional_notes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_console</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_and_time</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">additional_console</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_and_time</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;date_and_time must be a string&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">additional_console</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;additional_console must be a string&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="p">[</span><span class="n">date_and_time</span><span class="p">]</span> <span class="o">=</span> <span class="n">additional_console</span>

    <span class="c1"># Path management</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_filepath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Wrap flat paths for validation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_structure_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;flat&#39;</span><span class="p">:</span>
            <span class="n">path_to_validate</span> <span class="o">=</span> <span class="p">{</span><span class="n">label</span><span class="p">:</span> <span class="n">path</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_to_validate</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">path_to_store</span> <span class="o">=</span> <span class="n">path</span>

        <span class="c1"># Check for duplicate label</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="s2">&quot;Duplicate label found in dataset_manager&quot;</span>

        <span class="c1"># Check that all paths are valid</span>
        <span class="k">for</span> <span class="n">sublabel</span> <span class="ow">in</span> <span class="n">path_to_validate</span><span class="p">:</span>
            <span class="c1"># Check path before adding:</span>
            <span class="n">is_path_valid</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_path</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path_to_validate</span><span class="p">[</span><span class="n">sublabel</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_path_valid</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;Will not add file with disallowed extension&quot;</span>

        <span class="c1"># Add the path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">path_to_store</span>

        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_colour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colour</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Checks for duplicate label</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colours</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="s2">&quot;Duplicate label found in colours&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Add the file to the dataset and update the gui</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colours</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">colour</span>

    <span class="c1"># Checks are needed before paths are added to the dataset_manager</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_check_valid_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;path must be a string&quot;</span><span class="p">)</span>
        <span class="c1"># Checks whether the path exists and points to a file</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="c1"># Checks if the file has the proper extension</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_accepted_extensions</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;DataSet Forbidden Extension: Ignored </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;DataSet Not a File: Ignored </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;DataSet Filesystem Error: Ignored </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="dataset_manager.dataset.DataSet.construct_filepaths_nrecursive" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_filepaths_nrecursive</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Will generate a flat file set and add it to the current filepaths. This will seek all files and
    of the giver root_dir and append all dataset files to the filepaths attribute. Note that
    root_dir should be an absolute path.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>dataset_manager\dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">construct_filepaths_nrecursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Will generate a flat file set and add it to the current filepaths. This will seek all files and</span>
<span class="sd">        of the giver root_dir and append all dataset files to the filepaths attribute. Note that</span>
<span class="sd">        root_dir should be an absolute path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Checks which files are contained in the root dir</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="c1"># Ignores duplicates</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">errors</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ignored </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: duplicate label </span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">continue</span>

        <span class="c1"># Only add valid files</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">is_path_valid</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_path_valid</span><span class="p">:</span>
            <span class="c1"># Use filename as path label</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_filepath</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">+=</span> <span class="n">error_msg</span>

    <span class="k">return</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dataset_manager.dataset.DataSet.construct_structured_filepaths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_structured_filepaths</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Will generate a dirlabelled file set and add it to the current filepaths. This will seek all files and
    subdirectories of the giver root_dir and append all dataset files to the filepaths attribute. Note that
    root_dir should be an absolute path.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>dataset_manager\dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">construct_structured_filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Will generate a dirlabelled file set and add it to the current filepaths. This will seek all files and</span>
<span class="sd">        subdirectories of the giver root_dir and append all dataset files to the filepaths attribute. Note that</span>
<span class="sd">        root_dir should be an absolute path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Function construct_structured_filepaths is deprecated use construct_filepaths instead&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_structure_type</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;flat&quot;</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">errors</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ignored </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: duplicate label </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">continue</span>

            <span class="c1"># Create nested dict for subdirectories</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">natsort</span><span class="o">.</span><span class="n">natsorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)):</span>
                    <span class="c1"># Only append to dataset if file is actually a file with an accepted extension</span>
                    <span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">is_path_valid</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">is_path_valid</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">filepaths</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">file</span><span class="p">]</span> <span class="o">=</span> <span class="n">filepath</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">errors</span> <span class="o">+=</span> <span class="n">error_msg</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="s2">&quot;Flat dataset_manager cannot use dirlabelled construction&quot;</span>

    <span class="k">return</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>


</div>

<div class="doc doc-object doc-class">



<a id="dataset_manager.dataset_json_encoder.DataSetJSONEncoder"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="json.JSONEncoder">JSONEncoder</span></code></p>



        <p>JSON encoder for <code>DataSet</code> objects and related dataclasses.</p>
<p>This encoder provides two custom behaviours:</p>
<ul>
<li><code>datetime.datetime</code> instances are serialised to a compact string
  representation using the format <code>"%Y.%m.%d_%H.%M.%S"</code>. This matches
  the format expected by <code>DataSet</code> and the corresponding JSON decoder.</li>
<li>All other objects are serialised via their <code>__dict__</code> attribute,
  which is sufficient for simple container-like classes such as <code>DataSet</code>.</li>
</ul>
<p>The encoder is intended to be used together with <code>DataSetJSONEncoder</code> to
provide a round-trip-safe JSON representation of datasets.</p>







              <details class="quote">
                <summary>Source code in <code>dataset_manager\dataset_json_encoder.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@decorate_class_with_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DataSetJSONEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    JSON encoder for `DataSet` objects and related dataclasses.</span>

<span class="sd">    This encoder provides two custom behaviours:</span>

<span class="sd">    - ``datetime.datetime`` instances are serialised to a compact string</span>
<span class="sd">      representation using the format ``&quot;%Y.%m.%d_%H.%M.%S&quot;``. This matches</span>
<span class="sd">      the format expected by `DataSet` and the corresponding JSON decoder.</span>
<span class="sd">    - All other objects are serialised via their ``__dict__`` attribute,</span>
<span class="sd">      which is sufficient for simple container-like classes such as `DataSet`.</span>

<span class="sd">    The encoder is intended to be used together with `DataSetJSONEncoder` to</span>
<span class="sd">    provide a round-trip-safe JSON representation of datasets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y.%m.</span><span class="si">%d</span><span class="s2">_%H.%M.%S&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>


</div>

<div class="doc doc-object doc-class">



<a id="dataset_manager.dataset_json_decoder.DataSetJSONDecoder"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="json.JSONDecoder">JSONDecoder</span></code></p>



        <p>Custom JSON decoder that reconstructs <code>DataSet</code> instances from JSON.</p>
<p>This decoder installs an <code>object_hook</code> that:
- Detects dictionaries carrying the expected <code>DataSet</code> fields
  (e.g. <code>creation_date</code>, <code>name</code>, <code>device</code>, <code>experiment_date_time</code>,
  <code>notes</code>, <code>console</code>, <code>structure_type</code>, <code>filepaths</code>, <code>colours</code>).
- Instantiates a new <code>DataSet</code> using the stored creation date.
- Replays all relevant setters to restore metadata, structure type, paths,
  colours, and annotations.</p>
<p>If a JSON object does not match the expected shape, it is returned unchanged,
allowing non-<code>DataSet</code> data to be decoded normally.</p>







              <details class="quote">
                <summary>Source code in <code>dataset_manager\dataset_json_decoder.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@decorate_class_with_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DataSetJSONDecoder</span><span class="p">(</span><span class="n">JSONDecoder</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom JSON decoder that reconstructs `DataSet` instances from JSON.</span>

<span class="sd">    This decoder installs an `object_hook` that:</span>
<span class="sd">    - Detects dictionaries carrying the expected `DataSet` fields</span>
<span class="sd">      (e.g. ``creation_date``, ``name``, ``device``, ``experiment_date_time``,</span>
<span class="sd">      ``notes``, ``console``, ``structure_type``, ``filepaths``, ``colours``).</span>
<span class="sd">    - Instantiates a new `DataSet` using the stored creation date.</span>
<span class="sd">    - Replays all relevant setters to restore metadata, structure type, paths,</span>
<span class="sd">      colours, and annotations.</span>

<span class="sd">    If a JSON object does not match the expected shape, it is returned unchanged,</span>
<span class="sd">    allowing non-`DataSet` data to be decoded normally.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;object_hook&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_hook</span><span class="p">(</span><span class="n">dct</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;creation_date&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_device</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;device&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_experiment_date</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;experiment_date_time&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_notes</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;notes&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_console</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;console&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_structure_type</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;structure_type&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_filepaths</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;filepaths&#39;</span><span class="p">])</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">set_colours</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;colours&#39;</span><span class="p">])</span>

            <span class="k">return</span> <span class="n">dataset</span>

        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dct</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>


</div>

<div class="doc doc-object doc-class">



<a id="dataset_manager.dataset_manager.DataSetManager"></a>
    <div class="doc doc-contents first">



        <p>Small helper class for persisting <code>DataSet</code> instances to and from JSON files.</p>
<h3 id="dataset_manager.dataset_manager.DataSetManager--responsibilities">Responsibilities</h3>
<ul>
<li><code>save_dataset(dataset, file_name)</code>:
    Serialises a <code>DataSet</code> instance to disk using <code>DataSetJSONDecoder</code>.
    The method checks that the passed object is a <code>DataSet</code> and writes
    the encoded JSON to the given file path.</li>
<li><code>open_dataset(file_name)</code>:
    Opens a JSON file and deserialises it into a <code>DataSet</code> instance using
    <code>DataSetJSONEncoder</code>.</li>
</ul>
<p>The manager does not interpret the dataset content; it only handles the
IO and wiring between JSON encoder/decoder and the underlying <code>DataSet</code>
objects.</p>







              <details class="quote">
                <summary>Source code in <code>dataset_manager\dataset_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@decorate_class_with_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DataSetManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Small helper class for persisting `DataSet` instances to and from JSON files.</span>

<span class="sd">       Responsibilities</span>
<span class="sd">       ----------------</span>
<span class="sd">       - `save_dataset(dataset, file_name)`:</span>
<span class="sd">           Serialises a `DataSet` instance to disk using `DataSetJSONDecoder`.</span>
<span class="sd">           The method checks that the passed object is a `DataSet` and writes</span>
<span class="sd">           the encoded JSON to the given file path.</span>
<span class="sd">       - `open_dataset(file_name)`:</span>
<span class="sd">           Opens a JSON file and deserialises it into a `DataSet` instance using</span>
<span class="sd">           `DataSetJSONEncoder`.</span>

<span class="sd">       The manager does not interpret the dataset content; it only handles the</span>
<span class="sd">       IO and wiring between JSON encoder/decoder and the underlying `DataSet`</span>
<span class="sd">       objects.</span>
<span class="sd">   &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">save_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Saves the dataset_manager data into a JSON file &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">DataSet</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dataset must be an instance of DataSet&quot;</span><span class="p">)</span>

        <span class="c1"># Who should check whether the filename is valid?</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DataSetJSONDecoder</span><span class="p">)</span>
        <span class="n">json_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">open_dataset</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DataSetJSONEncoder</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="dataset_manager.dataset_manager.DataSetManager.save_dataset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Saves the dataset_manager data into a JSON file</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>dataset_manager\dataset_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">save_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Saves the dataset_manager data into a JSON file &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">DataSet</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dataset must be an instance of DataSet&quot;</span><span class="p">)</span>

    <span class="c1"># Who should check whether the filename is valid?</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DataSetJSONDecoder</span><span class="p">)</span>
    <span class="n">json_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>


</div>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Allyson-Robert/X-LAB_Plotting_Manager" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
